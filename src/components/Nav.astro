---
import { Image } from 'astro:assets'
import Logo from '../images/Logo.png'
import { socials, urls } from '../constants'
import '/node_modules/flag-icons/css/flag-icons.min.css'
import { FaCar, FaHome, FaMotorcycle } from 'react-icons/fa'
import { IoMdPricetag, IoMdClose } from 'react-icons/io'
import { GiHamburgerMenu } from 'react-icons/gi'

/** Main menu items */

const textLinks: { label: string; href: string }[] = [
  { label: 'Home', href: urls.home },
  { label: 'Cars', href: urls.cars },
  { label: 'Motorcycles', href: urls.motorcycles },
  { label: 'Quote', href: urls.quote }
]

const navLinks = textLinks.filter((link) => link.href !== Astro.url.pathname)

/** Conditional variable to switch open the nav menu */
---

<nav class='text-[#FDD387] '>
  <div class='flex bg-[#02003D] h-16 items-center justify-between px-3'>
    <div class='flex-none w-1/6'>
      <Image
        src={Logo}
        class='bg-[#02003D] w-11/12'
        alt='Low Raider Dreamworks Garage Logo.'
      />
    </div>
    <!-- <div class="flex-initial w-32 flex justify-around">
      <div>hello</div>
      <div>hello</div>
      <div>hello</div>
    </div> -->
    <div class='flex-initial'>
      <button id='nav-button-hamburger' class='text-3xl'
        >{(<GiHamburgerMenu />)}</button
      >
      <button id='nav-button-close' class='text-3xl hidden'
        >{(<IoMdClose />)}</button
      >
    </div>
  </div>
  <section class='bg-[#02003D] hidden justify-end w-full absolute' id='nav-menu'>
    <ul class='nav-items flex-col justify-center'>
      {
        navLinks.map(({ label, href }) => (
          <li class='flex justify-center text-xl items-center h-9'>
            <p class='mr-2'>
              {label === 'Home' && <FaHome />}
              {label === 'Cars' && <FaCar />}
              {label === 'Motorcycles' && <FaMotorcycle />}
              {label === 'Quote' && <IoMdPricetag />}
            </p>
            <a href={href}>{label}</a>
          </li>
        ))
      }
      <hr class='h-px my-2 bg-[#D43661] border-0' />
      <div class='flex justify-around mb-3'>
        <span class='fi fi-us'></span><span class='fi fi-co'></span>
      </div>
    </ul>
  </section>
</nav>

<script>
  // Find all buttons with the `alert` class on the page.
  const navButtonHamburger = document.getElementById('nav-button-hamburger')
  const navButtonClose = document.getElementById('nav-button-close')
  const navMenu = document.getElementById('nav-menu')

  // Handle clicks on each button.
  let isOpen = false

  if (navButtonHamburger) {
    navButtonHamburger.addEventListener('click', () => {
      isOpen = !isOpen

      if (isOpen && navButtonHamburger && navButtonClose && navMenu) {
        navButtonHamburger.style.display = 'none'
        navButtonClose.style.display = 'flex'
        navMenu.style.display = 'flex'
      }
    })
  }

  if (navButtonClose) {
    navButtonClose.addEventListener('click', () => {
      isOpen = !isOpen

      if (!isOpen && navButtonHamburger && navButtonClose && navMenu) {
        navButtonClose.style.display = 'none'
        navButtonHamburger.style.display = 'flex'
        navMenu.style.display = 'none'
      }
    })
  }
</script>
